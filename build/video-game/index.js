(()=>{"use strict";var e,i={534:()=>{const e=window.wp.i18n,i=window.wp.blocks,l=window.wp.blockEditor,a=window.wp.components,s=window.wp.element,t=JSON.parse('{"UU":"child/video-game"}'),r=window.ReactJSXRuntime,n=({gameTitle:i,coverUrl:l})=>i?.trim()?(0,r.jsxs)("div",{className:"child-game-card","aria-label":(0,e.__)("Videospiel","child"),children:[(0,r.jsx)("div",{className:"child-game-card__media",children:l?(0,r.jsx)("img",{className:"child-game-card__cover",src:l,alt:i,loading:"lazy",crossOrigin:"anonymous"}):(0,r.jsx)("div",{className:"child-game-card__placeholder","aria-hidden":"true"})}),(0,r.jsx)("div",{className:"child-game-card__meta",children:(0,r.jsx)("h3",{className:"child-game-card__title",children:i})})]}):(0,r.jsx)("div",{className:"game-preview--empty",children:(0,e.__)("Bitte wÃ¤hle ein Spiel aus der Suche aus oder gib die Details manuell ein.","child")}),c=({results:e,selectedId:i,onSelect:l})=>e.length?(0,r.jsx)("div",{className:"game-search-results",children:e.map(e=>(0,r.jsxs)(a.Button,{variant:e.id===i?"primary":"secondary",onClick:()=>l(e),className:"game-search-result"+(e.id===i?" is-active":""),children:[e.cover?(0,r.jsx)("span",{className:"game-search-result__thumb",children:(0,r.jsx)("img",{src:e.cover,alt:e.title||"",loading:"lazy"})}):(0,r.jsx)("span",{className:"game-search-result__thumb game-search-result__thumb--placeholder","aria-hidden":"true",children:"ðŸŽ®"}),(0,r.jsx)("span",{className:"game-search-result__details",children:(0,r.jsx)("span",{className:"game-search-result__title",children:e.title})})]},e.id))}):null;(0,i.registerBlockType)(t.UU,{edit:function({attributes:i,setAttributes:t}){const d=(0,l.useBlockProps)(),{gameTitle:o,coverUrl:h}=i,[u,m]=(0,s.useState)(""),[_,v]=(0,s.useState)(!1),[g,p]=(0,s.useState)([]),[x,b]=(0,s.useState)(null),[j,w]=(0,s.useState)(""),[f,y]=(0,s.useState)(!1);(0,s.useEffect)(()=>{o&&m(e=>e||o)},[o]);const S=async()=>{const i=u.trim();if(!i)return w((0,e.__)("Bitte gib einen Suchbegriff ein.","child")),void y(!1);v(!0),w(""),p([]),b(null);try{const l=await fetch(`/wp-json/child/v1/igdb-search?search=${encodeURIComponent(i)}`);if(!l.ok)throw new Error("Request failed");const a=((await l.json()).games||[]).map(e=>({id:e.id,title:e.name||"",cover:e.cover_url||""}));p(a),y(!0),a.length||w((0,e.__)("Keine Ergebnisse gefunden.","child"))}catch(i){console.error("Fehler beim Suchen:",i),w((0,e.__)("Beim Suchen ist ein Fehler aufgetreten. Bitte versuche es erneut.","child")),y(!1)}v(!1)};return(0,r.jsxs)("div",{...d,children:[(0,r.jsxs)(l.InspectorControls,{children:[(0,r.jsxs)(a.PanelBody,{title:(0,e.__)("Spiel finden","child"),initialOpen:!0,children:[(0,r.jsx)(a.TextControl,{label:(0,e.__)("Suche nach Titel","child"),value:u,onChange:m,placeholder:(0,e.__)("Spieltitel eingeben...","child"),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),S())}}),(0,r.jsx)(a.Button,{variant:"primary",onClick:S,disabled:_,className:"game-search-button",children:_?(0,e.__)("Suche...","child"):(0,e.__)("Suchen","child")}),_&&(0,r.jsx)("div",{className:"game-search-loading",children:(0,r.jsx)(a.Spinner,{})}),j&&(0,r.jsx)(a.Notice,{status:"error",isDismissible:!1,children:j}),!_&&f&&(0,r.jsx)(c,{results:g,selectedId:x,onSelect:e=>{b(e.id),m(e.title),t({gameTitle:e.title||o,coverUrl:e.cover||h||""})}})]}),(0,r.jsxs)(a.PanelBody,{title:(0,e.__)("Spieldetails","child"),initialOpen:!0,children:[(0,r.jsx)(a.TextControl,{label:(0,e.__)("Titel","child"),value:o,onChange:e=>t({gameTitle:e})}),(0,r.jsx)(a.TextControl,{label:(0,e.__)("Cover-URL","child"),value:h,onChange:e=>t({coverUrl:e}),help:(0,e.__)("Optional: Eigene Cover-Grafik einfÃ¼gen","child")})]})]}),(0,r.jsx)(n,{...i})]})},save:()=>null})}},l={};function a(e){var s=l[e];if(void 0!==s)return s.exports;var t=l[e]={exports:{}};return i[e](t,t.exports,a),t.exports}a.m=i,e=[],a.O=(i,l,s,t)=>{if(!l){var r=1/0;for(o=0;o<e.length;o++){for(var[l,s,t]=e[o],n=!0,c=0;c<l.length;c++)(!1&t||r>=t)&&Object.keys(a.O).every(e=>a.O[e](l[c]))?l.splice(c--,1):(n=!1,t<r&&(r=t));if(n){e.splice(o--,1);var d=s();void 0!==d&&(i=d)}}return i}t=t||0;for(var o=e.length;o>0&&e[o-1][2]>t;o--)e[o]=e[o-1];e[o]=[l,s,t]},a.o=(e,i)=>Object.prototype.hasOwnProperty.call(e,i),(()=>{var e={794:0,574:0};a.O.j=i=>0===e[i];var i=(i,l)=>{var s,t,[r,n,c]=l,d=0;if(r.some(i=>0!==e[i])){for(s in n)a.o(n,s)&&(a.m[s]=n[s]);if(c)var o=c(a)}for(i&&i(l);d<r.length;d++)t=r[d],a.o(e,t)&&e[t]&&e[t][0](),e[t]=0;return a.O(o)},l=globalThis.webpackChunktwentytwentyfive_child_blocks=globalThis.webpackChunktwentytwentyfive_child_blocks||[];l.forEach(i.bind(null,0)),l.push=i.bind(null,l.push.bind(l))})();var s=a.O(void 0,[574],()=>a(534));s=a.O(s)})();