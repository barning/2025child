(()=>{"use strict";var e,i={534:()=>{const e=window.wp.i18n,i=window.wp.blocks,l=window.wp.blockEditor,s=window.wp.components,a=window.wp.element,r=JSON.parse('{"UU":"child/video-game"}'),t=window.ReactJSXRuntime,n=({gameTitle:i,coverUrl:l})=>i?.trim()?(0,t.jsxs)("div",{className:"child-game-card","aria-label":(0,e.__)("Videospiel","child"),children:[(0,t.jsx)("div",{className:"child-game-card__media",children:l?(0,t.jsx)("img",{className:"child-game-card__cover",src:l,alt:i,loading:"lazy",crossOrigin:"anonymous"}):(0,t.jsx)("div",{className:"child-game-card__placeholder","aria-hidden":"true"})}),(0,t.jsx)("div",{className:"child-game-card__meta",children:(0,t.jsx)("h3",{className:"child-game-card__title",children:i})})]}):(0,t.jsx)("div",{className:"game-preview--empty",children:(0,e.__)("Bitte wÃ¤hle ein Spiel aus der Suche aus oder gib die Details manuell ein.","child")}),c=({results:e,selectedId:i,onSelect:l})=>e.length?(0,t.jsx)("div",{className:"game-search-results",children:e.map(e=>(0,t.jsxs)(s.Button,{variant:e.id===i?"primary":"secondary",onClick:()=>l(e),className:"game-search-result"+(e.id===i?" is-active":""),children:[e.cover?(0,t.jsx)("span",{className:"game-search-result__thumb",children:(0,t.jsx)("img",{src:e.cover,alt:e.title||"",loading:"lazy"})}):(0,t.jsx)("span",{className:"game-search-result__thumb game-search-result__thumb--placeholder","aria-hidden":"true",children:"ðŸŽ®"}),(0,t.jsx)("span",{className:"game-search-result__details",children:(0,t.jsx)("span",{className:"game-search-result__title",children:e.title})})]},e.id))}):null;(0,i.registerBlockType)(r.UU,{edit:function({attributes:i,setAttributes:r}){const o=(0,l.useBlockProps)(),{gameTitle:d,coverUrl:h}=i,[u,m]=(0,a.useState)(""),[_,g]=(0,a.useState)(!1),[v,p]=(0,a.useState)([]),[x,b]=(0,a.useState)(null),[j,w]=(0,a.useState)(""),[f,S]=(0,a.useState)(!1);(0,a.useEffect)(()=>{d&&m(e=>e||d)},[d]);const y=async()=>{const i=u.trim();if(!i)return w((0,e.__)("Bitte gib einen Suchbegriff ein.","child")),void S(!1);g(!0),w(""),p([]),b(null);try{const l=await fetch(`/wp-json/child/v1/igdb-search?search=${encodeURIComponent(i)}`),s=await l.json();if(!l.ok){let i=(0,e.__)("Beim Suchen ist ein Fehler aufgetreten.","child");throw s&&s.message?i=s.message:s&&s.code&&(i=`${(0,e.__)("Fehler","child")}: ${s.code}`),console.error("IGDB API Error:",s),new Error(i)}const a=(s.games||[]).map(e=>({id:e.id,title:e.name||"",cover:e.cover_url||""}));p(a),S(!0),a.length||w((0,e.__)("Keine Ergebnisse gefunden.","child"))}catch(i){console.error("Fehler beim Suchen:",i);const l=i.message||(0,e.__)("Beim Suchen ist ein Fehler aufgetreten. Bitte versuche es erneut.","child");w(l),S(!1)}g(!1)};return(0,t.jsxs)("div",{...o,children:[(0,t.jsxs)(l.InspectorControls,{children:[(0,t.jsxs)(s.PanelBody,{title:(0,e.__)("Spiel finden","child"),initialOpen:!0,children:[(0,t.jsx)(s.TextControl,{label:(0,e.__)("Suche nach Titel","child"),value:u,onChange:m,placeholder:(0,e.__)("Spieltitel eingeben...","child"),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),y())}}),(0,t.jsx)(s.Button,{variant:"primary",onClick:y,disabled:_,className:"game-search-button",children:_?(0,e.__)("Suche...","child"):(0,e.__)("Suchen","child")}),_&&(0,t.jsx)("div",{className:"game-search-loading",children:(0,t.jsx)(s.Spinner,{})}),j&&(0,t.jsx)(s.Notice,{status:"error",isDismissible:!1,children:j}),!_&&f&&(0,t.jsx)(c,{results:v,selectedId:x,onSelect:e=>{b(e.id),m(e.title),r({gameTitle:e.title||d,coverUrl:e.cover||h||""})}})]}),(0,t.jsxs)(s.PanelBody,{title:(0,e.__)("Spieldetails","child"),initialOpen:!0,children:[(0,t.jsx)(s.TextControl,{label:(0,e.__)("Titel","child"),value:d,onChange:e=>r({gameTitle:e})}),(0,t.jsx)(s.TextControl,{label:(0,e.__)("Cover-URL","child"),value:h,onChange:e=>r({coverUrl:e}),help:(0,e.__)("Optional: Eigene Cover-Grafik einfÃ¼gen","child")})]})]}),(0,t.jsx)(n,{...i})]})},save:()=>null})}},l={};function s(e){var a=l[e];if(void 0!==a)return a.exports;var r=l[e]={exports:{}};return i[e](r,r.exports,s),r.exports}s.m=i,e=[],s.O=(i,l,a,r)=>{if(!l){var t=1/0;for(d=0;d<e.length;d++){for(var[l,a,r]=e[d],n=!0,c=0;c<l.length;c++)(!1&r||t>=r)&&Object.keys(s.O).every(e=>s.O[e](l[c]))?l.splice(c--,1):(n=!1,r<t&&(t=r));if(n){e.splice(d--,1);var o=a();void 0!==o&&(i=o)}}return i}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[l,a,r]},s.o=(e,i)=>Object.prototype.hasOwnProperty.call(e,i),(()=>{var e={794:0,574:0};s.O.j=i=>0===e[i];var i=(i,l)=>{var a,r,[t,n,c]=l,o=0;if(t.some(i=>0!==e[i])){for(a in n)s.o(n,a)&&(s.m[a]=n[a]);if(c)var d=c(s)}for(i&&i(l);o<t.length;o++)r=t[o],s.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return s.O(d)},l=globalThis.webpackChunktwentytwentyfive_child_blocks=globalThis.webpackChunktwentytwentyfive_child_blocks||[];l.forEach(i.bind(null,0)),l.push=i.bind(null,l.push.bind(l))})();var a=s.O(void 0,[574],()=>s(534));a=s.O(a)})();