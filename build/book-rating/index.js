(()=>{"use strict";var e,t={539:()=>{const e=window.wp.i18n,t=window.wp.blocks,i=window.wp.blockEditor,o=window.wp.components,r=window.wp.element,s=JSON.parse('{"UU":"child/book-rating"}'),l=window.ReactJSXRuntime,n=e=>{if(!e)return"";let t=e.replace(/^http:\/\//i,"https://");return t.includes("zoom=")&&(t=t.replace(/zoom=\d/g,"zoom=2")),t},a=({bookTitle:t,author:i,genre:o,coverUrl:r,rating:s})=>t?.trim()?(0,l.jsxs)("div",{className:"book-preview",children:[r?(0,l.jsx)("img",{className:"book-preview__cover",src:r,alt:t}):null,(0,l.jsxs)("div",{className:"book-preview__info",children:[(0,l.jsx)("h3",{className:"book-preview__title",children:t}),i?.trim()?(0,l.jsx)("p",{className:"book-preview__author",children:i}):null,o?.trim()?(0,l.jsx)("p",{className:"book-preview__genre",children:o}):null,(0,l.jsx)("div",{className:"book-preview__rating",children:[1,2,3,4,5].map(e=>(0,l.jsx)("span",{className:"book-preview__star "+(e<=s?"is-active":""),children:"★"},e))})]})]}):(0,l.jsx)("div",{className:"book-preview book-preview--empty",children:(0,e.__)("Bitte wähle ein Buch aus der Suche aus oder gib die Details manuell ein.","child")});(0,t.registerBlockType)(s.UU,{edit:function({attributes:t,setAttributes:s}){const c=(0,i.useBlockProps)(),{bookTitle:h,author:u,genre:d,rating:m,coverUrl:v}=t,[p,b]=(0,r.useState)(""),[g,_]=(0,r.useState)(!1),[w,k]=(0,r.useState)([]),[x,j]=(0,r.useState)(null),[f,y]=(0,r.useState)(""),[N,S]=(0,r.useState)(!1);(0,r.useEffect)(()=>{h&&b(e=>e||h)},[h]);const C=async()=>{const t=p.trim();if(!t)return y((0,e.__)("Bitte gib einen Suchbegriff ein.","child")),void S(!1);_(!0),y(""),k([]),j(null);try{const i=await fetch(`https://www.googleapis.com/books/v1/volumes?q=${encodeURIComponent(t)}&maxResults=5`);if(!i.ok)throw new Error("Request failed");const o=((await i.json()).items||[]).map(e=>{const t=e.volumeInfo?.imageLinks?.thumbnail||e.volumeInfo?.imageLinks?.smallThumbnail||"";return{id:e.id,title:e.volumeInfo?.title||"",authors:e.volumeInfo?.authors||[],categories:e.volumeInfo?.categories||[],cover:n(t)}});k(o),S(!0),o.length||y((0,e.__)("Keine Ergebnisse gefunden.","child"))}catch(t){console.error("Fehler beim Suchen:",t),y((0,e.__)("Beim Suchen ist ein Fehler aufgetreten. Bitte versuche es erneut.","child")),S(!1)}_(!1)};return(0,l.jsxs)("div",{...c,children:[(0,l.jsx)(i.InspectorControls,{children:(0,l.jsxs)(o.PanelBody,{title:(0,e.__)("Buchdetails","child"),children:[(0,l.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,l.jsx)(o.TextControl,{label:(0,e.__)("Suche nach Titel oder Autor","child"),value:p,onChange:b,placeholder:(0,e.__)("Buchtitel eingeben...","child"),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),C())}}),(0,l.jsx)(o.Button,{isPrimary:!0,onClick:C,disabled:g,style:{marginTop:"0.5rem"},children:g?(0,e.__)("Suche...","child"):(0,e.__)("Suchen","child")}),g&&(0,l.jsx)("div",{className:"book-search-loading",children:(0,l.jsx)(o.Spinner,{})}),f&&(0,l.jsx)(o.Notice,{status:"error",isDismissible:!1,children:f}),!g&&N&&w.length>0&&(0,l.jsx)("div",{className:"book-search-results",children:w.map(e=>(0,l.jsxs)(o.Button,{variant:e.id===x?"primary":"secondary",onClick:()=>(e=>{const t=e.authors.length?e.authors.join(", "):u,i=e.categories.length?e.categories.join(", "):d;j(e.id),b(e.title),s({bookTitle:e.title||h,author:t,genre:i,coverUrl:e.cover||v||""})})(e),className:"book-search-result",children:[(0,l.jsx)("span",{className:"book-search-result__title",children:e.title}),e.authors.length>0&&(0,l.jsx)("span",{className:"book-search-result__author",children:e.authors.join(", ")})]},e.id))})]}),(0,l.jsx)(o.TextControl,{label:(0,e.__)("Titel","child"),value:h,onChange:e=>s({bookTitle:e})}),(0,l.jsx)(o.TextControl,{label:(0,e.__)("Autor","child"),value:u,onChange:e=>s({author:e})}),(0,l.jsx)(o.TextControl,{label:(0,e.__)("Genre","child"),value:d,onChange:e=>s({genre:e})}),(0,l.jsxs)("div",{className:"book-rating-control",children:[(0,l.jsx)("label",{children:(0,e.__)("Bewertung","child")}),(0,l.jsx)("div",{className:"star-rating",children:[1,2,3,4,5].map(e=>(0,l.jsx)("button",{type:"button",className:"star-button "+(e<=m?"active":""),onClick:()=>s({rating:e}),children:"★"},e))})]})]})}),(0,l.jsx)(a,{...t})]})},save:()=>null})}},i={};function o(e){var r=i[e];if(void 0!==r)return r.exports;var s=i[e]={exports:{}};return t[e](s,s.exports,o),s.exports}o.m=t,e=[],o.O=(t,i,r,s)=>{if(!i){var l=1/0;for(h=0;h<e.length;h++){for(var[i,r,s]=e[h],n=!0,a=0;a<i.length;a++)(!1&s||l>=s)&&Object.keys(o.O).every(e=>o.O[e](i[a]))?i.splice(a--,1):(n=!1,s<l&&(l=s));if(n){e.splice(h--,1);var c=r();void 0!==c&&(t=c)}}return t}s=s||0;for(var h=e.length;h>0&&e[h-1][2]>s;h--)e[h]=e[h-1];e[h]=[i,r,s]},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={659:0,323:0};o.O.j=t=>0===e[t];var t=(t,i)=>{var r,s,[l,n,a]=i,c=0;if(l.some(t=>0!==e[t])){for(r in n)o.o(n,r)&&(o.m[r]=n[r]);if(a)var h=a(o)}for(t&&t(i);c<l.length;c++)s=l[c],o.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return o.O(h)},i=globalThis.webpackChunktwentytwentyfive_child_blocks=globalThis.webpackChunktwentytwentyfive_child_blocks||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})();var r=o.O(void 0,[323],()=>o(539));r=o.O(r)})();