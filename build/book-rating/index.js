(()=>{"use strict";var e,t={539:()=>{const e=window.wp.i18n,t=window.wp.blocks,o=window.wp.blockEditor,i=window.wp.components,s=window.wp.element,r=JSON.parse('{"UU":"child/book-rating"}'),l=window.ReactJSXRuntime,n=e=>{if(!e)return"";let t=e.replace(/^http:\/\//i,"https://");return t.includes("zoom=")&&(t=t.replace(/zoom=\d/g,"zoom=2")),t},a=({bookTitle:t,author:o,genre:i,coverUrl:s,rating:r})=>t?.trim()?(0,l.jsxs)("div",{className:"book-display",children:[s?(0,l.jsx)("img",{className:"book-cover",src:s,alt:t}):null,(0,l.jsxs)("div",{className:"book-info",children:[(0,l.jsx)("h3",{className:"book-title",children:t}),o?.trim()?(0,l.jsx)("p",{className:"book-author",children:o}):null,i?.trim()?(0,l.jsx)("p",{className:"book-genre",children:i}):null,(0,l.jsx)("div",{className:"book-rating",children:[1,2,3,4,5].map(e=>(0,l.jsx)("span",{className:"star"+(e<=r?" active":""),children:"★"},e))})]})]}):(0,l.jsx)("div",{className:"book-preview--empty",children:(0,e.__)("Bitte wähle ein Buch aus der Suche aus oder gib die Details manuell ein.","child")});(0,t.registerBlockType)(r.UU,{edit:function({attributes:t,setAttributes:r}){const c=(0,o.useBlockProps)(),{bookTitle:h,author:u,genre:d,rating:m,coverUrl:b}=t,[v,g]=(0,s.useState)(""),[p,x]=(0,s.useState)(!1),[k,j]=(0,s.useState)([]),[w,_]=(0,s.useState)(null),[f,y]=(0,s.useState)(""),[N,S]=(0,s.useState)(!1);(0,s.useEffect)(()=>{h&&g(e=>e||h)},[h]);const C=async()=>{const t=v.trim();if(!t)return y((0,e.__)("Bitte gib einen Suchbegriff ein.","child")),void S(!1);x(!0),y(""),j([]),_(null);try{const o=await fetch(`https://www.googleapis.com/books/v1/volumes?q=${encodeURIComponent(t)}&maxResults=5`);if(!o.ok)throw new Error("Request failed");const i=((await o.json()).items||[]).map(e=>{const t=e.volumeInfo?.imageLinks?.thumbnail||e.volumeInfo?.imageLinks?.smallThumbnail||"";return{id:e.id,title:e.volumeInfo?.title||"",authors:e.volumeInfo?.authors||[],categories:e.volumeInfo?.categories||[],cover:n(t)}});j(i),S(!0),i.length||y((0,e.__)("Keine Ergebnisse gefunden.","child"))}catch(t){console.error("Fehler beim Suchen:",t),y((0,e.__)("Beim Suchen ist ein Fehler aufgetreten. Bitte versuche es erneut.","child")),S(!1)}x(!1)};return(0,l.jsxs)("div",{...c,children:[(0,l.jsx)(o.InspectorControls,{children:(0,l.jsxs)(i.PanelBody,{title:(0,e.__)("Buchdetails","child"),children:[(0,l.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,l.jsx)(i.TextControl,{label:(0,e.__)("Suche nach Titel oder Autor","child"),value:v,onChange:g,placeholder:(0,e.__)("Buchtitel eingeben...","child"),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),C())}}),(0,l.jsx)(i.Button,{isPrimary:!0,onClick:C,disabled:p,style:{marginTop:"0.5rem"},children:p?(0,e.__)("Suche...","child"):(0,e.__)("Suchen","child")}),p&&(0,l.jsx)("div",{className:"book-search-loading",children:(0,l.jsx)(i.Spinner,{})}),f&&(0,l.jsx)(i.Notice,{status:"error",isDismissible:!1,children:f}),!p&&N&&k.length>0&&(0,l.jsx)("div",{className:"book-search-results",children:k.map(e=>(0,l.jsxs)(i.Button,{variant:e.id===w?"primary":"secondary",onClick:()=>(e=>{const t=e.authors.length?e.authors.join(", "):u,o=e.categories.length?e.categories.join(", "):d;_(e.id),g(e.title),r({bookTitle:e.title||h,author:t,genre:o,coverUrl:e.cover||b||""})})(e),className:"book-search-result",children:[(0,l.jsx)("span",{className:"book-search-result__title",children:e.title}),e.authors.length>0&&(0,l.jsx)("span",{className:"book-search-result__author",children:e.authors.join(", ")})]},e.id))})]}),(0,l.jsx)(i.TextControl,{label:(0,e.__)("Titel","child"),value:h,onChange:e=>r({bookTitle:e})}),(0,l.jsx)(i.TextControl,{label:(0,e.__)("Autor","child"),value:u,onChange:e=>r({author:e})}),(0,l.jsx)(i.TextControl,{label:(0,e.__)("Genre","child"),value:d,onChange:e=>r({genre:e})}),(0,l.jsxs)("div",{className:"book-rating-control",children:[(0,l.jsx)("label",{children:(0,e.__)("Bewertung","child")}),(0,l.jsx)("div",{className:"star-rating",children:[1,2,3,4,5].map(e=>(0,l.jsx)("button",{type:"button",className:"star-button "+(e<=m?"active":""),onClick:()=>r({rating:e}),children:"★"},e))})]})]})}),(0,l.jsx)(a,{...t})]})},save:()=>null})}},o={};function i(e){var s=o[e];if(void 0!==s)return s.exports;var r=o[e]={exports:{}};return t[e](r,r.exports,i),r.exports}i.m=t,e=[],i.O=(t,o,s,r)=>{if(!o){var l=1/0;for(h=0;h<e.length;h++){for(var[o,s,r]=e[h],n=!0,a=0;a<o.length;a++)(!1&r||l>=r)&&Object.keys(i.O).every(e=>i.O[e](o[a]))?o.splice(a--,1):(n=!1,r<l&&(l=r));if(n){e.splice(h--,1);var c=s();void 0!==c&&(t=c)}}return t}r=r||0;for(var h=e.length;h>0&&e[h-1][2]>r;h--)e[h]=e[h-1];e[h]=[o,s,r]},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={659:0,323:0};i.O.j=t=>0===e[t];var t=(t,o)=>{var s,r,[l,n,a]=o,c=0;if(l.some(t=>0!==e[t])){for(s in n)i.o(n,s)&&(i.m[s]=n[s]);if(a)var h=a(i)}for(t&&t(o);c<l.length;c++)r=l[c],i.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return i.O(h)},o=globalThis.webpackChunktwentytwentyfive_child_blocks=globalThis.webpackChunktwentytwentyfive_child_blocks||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var s=i.O(void 0,[323],()=>i(539));s=i.O(s)})();